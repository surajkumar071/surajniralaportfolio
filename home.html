<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SearchHub Browser</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* Browser Chrome */
        .browser-chrome {
            background: #dee1e6;
            border-bottom: 1px solid #bdc1c6;
            padding: 8px 12px 0;
            height: 80px;
        }

        .browser-tabs {
            display: flex;
            margin-bottom: 8px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .browser-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            background: #e8eaed;
            border: 1px solid #dadce0;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            padding: 8px 16px;
            margin-right: 2px;
            font-size: 13px;
            color: #5f6368;
            cursor: pointer;
            min-width: 200px;
            max-width: 240px;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        .tab.active {
            background: white;
            color: #202124;
            border-color: #dadce0;
            z-index: 2;
        }

        .tab:hover:not(.active) {
            background: #f1f3f4;
        }

        .tab-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4285f4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        .tab-icon.loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .tab-title {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .tab-close {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            color: #5f6368;
            flex-shrink: 0;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .tab:hover .tab-close {
            opacity: 1;
        }

        .tab-close:hover {
            background: #dadce0;
        }

        .new-tab-btn {
            background: transparent;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #5f6368;
            margin-left: 8px;
            flex-shrink: 0;
        }

        .new-tab-btn:hover {
            background: #f1f3f4;
        }

        /* Address Bar */
        .address-bar-container {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            border: 1px solid #dadce0;
            border-radius: 20px;
            padding: 6px 12px;
            margin: 0 60px;
            position: relative;
        }

        .nav-buttons {
            display: flex;
            gap: 4px;
            margin-right: 8px;
        }

        .nav-button {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #5f6368;
            transition: all 0.2s;
        }

        .nav-button:hover:not(:disabled) {
            background: #f1f3f4;
            transform: scale(1.05);
        }

        .nav-button:active:not(:disabled) {
            transform: scale(0.95);
        }

        .nav-button:disabled {
            color: #dadce0;
            cursor: not-allowed;
        }

        .nav-button.can-navigate {
            background: #e3f2fd;
            color: #1976d2;
        }

        .home-button {
            width: 24px;
            height: 24px;
            background: #4285f4;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            margin-right: 8px;
            transition: all 0.2s;
        }

        .home-button:hover {
            background: #1557b0;
            transform: scale(1.05);
        }

        .address-bar {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
            padding: 4px 8px;
            background: transparent;
        }

        .search-type-toggle {
            display: flex;
            background: #f1f3f4;
            border-radius: 16px;
            padding: 2px;
            margin-right: 8px;
        }

        .search-type-btn {
            background: transparent;
            border: none;
            padding: 4px 12px;
            border-radius: 14px;
            font-size: 12px;
            cursor: pointer;
            color: #5f6368;
            transition: all 0.2s;
        }

        .search-type-btn.active {
            background: white;
            color: #1a73e8;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .search-button {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
        }

        .search-button:hover {
            background: #1557b0;
        }

        /* Browser Controls */
        .browser-controls {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 4px;
        }

        .control-button {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #5f6368;
            position: relative;
        }

        .control-button:hover {
            background: #f1f3f4;
        }

        /* History Dropdown */
        .history-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #dadce0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 300px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .history-dropdown.show {
            display: block;
        }

        .history-header {
            padding: 12px 16px;
            border-bottom: 1px solid #e8eaed;
            font-weight: 500;
            color: #202124;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .clear-history {
            background: none;
            border: none;
            color: #1a73e8;
            font-size: 12px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .clear-history:hover {
            background: #f1f3f4;
        }

        .history-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f1f3f4;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .history-item:hover {
            background: #f8f9fa;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #f1f3f4;
            flex-shrink: 0;
        }

        .history-content {
            flex: 1;
            min-width: 0;
        }

        .history-title {
            font-size: 14px;
            color: #202124;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-time {
            font-size: 12px;
            color: #5f6368;
        }

        .history-delete {
            width: 20px;
            height: 20px;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 50%;
            color: #5f6368;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .history-item:hover .history-delete {
            opacity: 1;
        }

        .history-delete:hover {
            background: #f1f3f4;
        }

        /* Content Area */
        .content-area {
            height: calc(100vh - 80px);
            background: white;
            overflow: hidden;
            position: relative;
        }

        .tab-content {
            height: 100%;
            overflow-y: auto;
            display: none;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content.swipe-back {
            transform: translateX(50px);
            opacity: 0.8;
        }

        .tab-content.swipe-forward {
            transform: translateX(-50px);
            opacity: 0.8;
        }

        .content-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Google-like Homepage */
        .homepage {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            text-align: center;
        }

        .logo-large {
            font-size: 6rem;
            font-weight: 300;
            margin-bottom: 2rem;
            background: linear-gradient(45deg, #4285f4, #34a853, #fbbc05, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .search-suggestion {
            color: #70757a;
            margin-top: 2rem;
            font-size: 14px;
        }

        /* Inline Search Box for Homepage */
        .homepage-search {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            border: 1px solid #dadce0;
            border-radius: 24px;
            padding: 12px 20px;
            margin: 2rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
        }

        .homepage-search-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            background: transparent;
        }

        .homepage-search-button {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
        }

        .homepage-search-button:hover {
            background: #1557b0;
        }

        /* Quick Access */
        .quick-access {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 3rem;
            max-width: 600px;
        }

        .quick-access-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: #202124;
        }

        .quick-access-item:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }

        .quick-access-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: #f1f3f4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .quick-access-title {
            font-size: 13px;
            font-weight: 500;
        }

        /* Results Area */
        .results-container {
            padding: 20px 0;
        }

        .results-info {
            color: #70757a;
            font-size: 14px;
            margin-bottom: 20px;
            padding-left: 20px;
        }

        .result-item {
            margin-bottom: 24px;
            padding: 0 20px;
        }

        .result-url {
            color: #202124;
            font-size: 14px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-favicon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #f1f3f4;
        }

        .result-title {
            font-size: 20px;
            font-weight: 400;
            color: #1a0dab;
            text-decoration: none;
            margin-bottom: 4px;
            display: block;
            line-height: 1.3;
            cursor: pointer;
        }

        .result-title:hover {
            text-decoration: underline;
        }

        .result-title:visited {
            color: #681da8;
        }

        .result-snippet {
            color: #4d5156;
            font-size: 14px;
            line-height: 1.4;
        }

        /* Image Results */
        .image-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            padding: 20px;
        }

        .image-result {
            border-radius: 8px;
            overflow: hidden;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .image-result:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .image-result img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-bottom: 1px solid #e8eaed;
        }

        .image-info {
            padding: 12px;
        }

        .image-title {
            font-size: 14px;
            font-weight: 500;
            color: #202124;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .image-source {
            font-size: 12px;
            color: #5f6368;
        }

        /* Image Modal */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .image-modal.show {
            display: flex;
        }

        .modal-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
        }

        .modal-info {
            padding: 16px;
            background: white;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .modal-source {
            font-size: 14px;
            color: #5f6368;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        .loading, .no-results, .error {
            text-align: center;
            padding: 40px 20px;
            color: #5f6368;
        }

        .error {
            color: #d93025;
            background: #fce8e6;
            border-radius: 8px;
            margin: 20px;
        }

        /* Swipe Indicators */
        .swipe-indicator {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(26, 115, 232, 0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            pointer-events: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .swipe-indicator.back {
            left: 20px;
        }

        .swipe-indicator.forward {
            right: 20px;
            background: rgba(56, 142, 60, 0.9);
        }

        .swipe-indicator.show {
            opacity: 1;
        }

        .demo-results {
            padding: 20px;
        }

        .demo-result-item {
            margin-bottom: 24px;
            padding: 16px;
            border-radius: 8px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .demo-result-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }

        .demo-result-title {
            font-size: 18px;
            color: #1a0dab;
            margin-bottom: 8px;
            text-decoration: none;
            cursor: pointer;
        }

        .demo-result-title:hover {
            text-decoration: underline;
        }

        .demo-result-url {
            color: #006621;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .demo-result-snippet {
            color: #545454;
            line-height: 1.4;
        }

        /* Website Display */
        .website-view {
            height: 100%;
            border: none;
            width: 100%;
        }

        .website-header {
            padding: 16px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e8eaed;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .website-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            background: #4285f4;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .website-info h3 {
            margin: 0;
            font-size: 18px;
            color: #202124;
        }

        .website-info p {
            margin: 4px 0 0 0;
            font-size: 14px;
            color: #5f6368;
        }

        .back-to-results {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 13px;
            margin-left: auto;
        }

        .back-to-results:hover {
            background: #1557b0;
        }

        @media (max-width: 768px) {
            .browser-chrome {
                padding: 8px;
            }
            
            .address-bar-container {
                margin: 0 10px;
            }
            
            .logo-large {
                font-size: 4rem;
            }
            
            .content-inner {
                padding: 20px 10px;
            }

            .quick-access {
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
            }

            .tab {
                min-width: 160px;
                max-width: 180px;
            }

            .homepage-search {
                margin: 1rem;
                max-width: calc(100% - 2rem);
            }

            .image-results {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 12px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Image Modal -->
    <div class="image-modal" id="imageModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeImageModal()">×</button>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <div class="modal-title" id="modalTitle"></div>
                <div class="modal-source" id="modalSource"></div>
            </div>
        </div>
    </div>

    <!-- Swipe Indicators -->
    <div class="swipe-indicator back" id="swipeBackIndicator">
        ← Go Back
    </div>
    
    <div class="swipe-indicator forward" id="swipeForwardIndicator">
        Go Forward →
    </div>

    <!-- Browser Chrome -->
    <div class="browser-chrome">
        <div class="browser-tabs" id="tabsContainer">
            <div class="tab active" data-tab-id="home">
                <div class="tab-icon">🏠</div>
                <div class="tab-title">New Tab</div>
                <div class="tab-close">×</div>
            </div>
            <button class="new-tab-btn" id="newTabBtn">+</button>
        </div>
        
        <div style="position: relative;">
            <div class="nav-buttons">
                <button class="nav-button" id="backBtn" disabled title="Go back (Alt+←)">←</button>
                <button class="nav-button" id="forwardBtn" disabled title="Go forward (Alt+→)">→</button>
                <button class="nav-button" id="refreshBtn" title="Refresh">↻</button>
                <button class="home-button" id="homeBtn" title="Home">🏠</button>
            </div>
            
            <div class="address-bar-container">
                <div class="search-type-toggle">
                    <button class="search-type-btn active" data-type="web">All</button>
                    <button class="search-type-btn" data-type="image">Images</button>
                </div>
                <input type="text" class="address-bar" placeholder="Search or type a URL" id="searchInput">
                <button class="search-button" id="searchButton">Search</button>
            </div>
            
            <div class="browser-controls">
                <button class="control-button" id="historyBtn" title="History">📜</button>
                <div class="history-dropdown" id="historyDropdown">
                    <div class="history-header">
                        <span>History</span>
                        <button class="clear-history" id="clearHistoryBtn">Clear All</button>
                    </div>
                    <div id="historyList"></div>
                </div>
                <button class="control-button" title="More options">⋮</button>
            </div>
        </div>
    </div>

    <!-- Content Area -->
    <div class="content-area" id="contentArea">
        <!-- Home Tab Content -->
        <div class="tab-content active" id="tab-home">
            <div class="content-inner">
                <div class="homepage">
                    <div class="logo-large">SearchHub</div>
                    <div class="homepage-search">
                        <input type="text" class="homepage-search-input" placeholder="Search the web..." id="homepageSearchInput">
                        <button class="homepage-search-button" id="homepageSearchButton">Search</button>
                    </div>
                    <div class="search-suggestion">Your gateway to the web</div>
                    
                    <div class="quick-access">
                        <a href="https://news.google.com/home?hl=hi&gl=IN&ceid=IN%3Ahi" class="quick-access-item" data-search="news">
                            <div class="quick-access-icon">📰</div>
                            <div class="quick-access-title">News</div>
                        </a>
                        <a href="https://www.accuweather.com" class="quick-access-item" data-search="weather">
                            <div class="quick-access-icon">🌤️</div>
                            <div class="quick-access-title">Weather</div>
                        </a>
                        <a href="https://sports.ndtv.com/" class="quick-access-item" data-search="sports">
                            <div class="quick-access-icon">⚽</div>
                            <div class="quick-access-title">Sports</div>
                        </a>
                        <a href="https://www.reuters.com/technology/" class="quick-access-item" data-search="technology">
                            <div class="quick-access-icon">💻</div>
                            <div class="quick-access-title">Tech</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Browser state variables
        let currentSearchType = 'web';
        let isLoading = false;
        let browsingHistory = [];
        let activeTabId = 'home';
        let tabCounter = 1;
        let tabs = {
            'home': {
                id: 'home',
                title: 'New Tab',
                icon: '🏠',
                type: 'homepage',
                url: '',
                history: [],
                historyIndex: -1
            }
        };

        // Sample images for demo
        const sampleImages = [
            'https://picsum.photos/400/300?random=1',
            'https://picsum.photos/400/300?random=2',
            'https://picsum.photos/400/300?random=3',
            'https://picsum.photos/400/300?random=4',
            'https://picsum.photos/400/300?random=5',
            'https://picsum.photos/400/300?random=6',
            'https://picsum.photos/400/300?random=7',
            'https://picsum.photos/400/300?random=8',
            'https://picsum.photos/400/300?random=9',
            'https://picsum.photos/400/300?random=10',
            'https://picsum.photos/400/300?random=11',
            'https://picsum.photos/400/300?random=12'
        ];

        // Swipe gesture variables
        let startX = 0;
        let startY = 0;
        let isSwipe = false;
        let swipeThreshold = 80;

        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const homepageSearchInput = document.getElementById('homepageSearchInput');
        const homepageSearchButton = document.getElementById('homepageSearchButton');
        const backBtn = document.getElementById('backBtn');
        const forwardBtn = document.getElementById('forwardBtn');
        const refreshBtn = document.getElementById('refreshBtn');
        const homeBtn = document.getElementById('homeBtn');
        const newTabBtn = document.getElementById('newTabBtn');
        const tabsContainer = document.getElementById('tabsContainer');
        const contentArea = document.getElementById('contentArea');
        const swipeBackIndicator = document.getElementById('swipeBackIndicator');
        const swipeForwardIndicator = document.getElementById('swipeForwardIndicator');
        const searchTypeButtons = document.querySelectorAll('.search-type-btn');
        const historyBtn = document.getElementById('historyBtn');
        const historyDropdown = document.getElementById('historyDropdown');
        const historyList = document.getElementById('historyList');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const imageModal = document.getElementById('imageModal');

        // Initialize the browser
        init();

        function init() {
            setupEventListeners();
            setupSwipeGestures();
            updateNavigationButtons();
            updateHistoryDropdown();
        }

        function setupEventListeners() {
            // Search functionality
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    performSearch();
                }
            });

            // Homepage search
            homepageSearchButton.addEventListener('click', performHomepageSearch);
            homepageSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    performHomepageSearch();
                }
            });

            // Navigation buttons
            backBtn.addEventListener('click', navigateBack);
            forwardBtn.addEventListener('click', navigateForward);
            refreshBtn.addEventListener('click', refreshPage);
            homeBtn.addEventListener('click', goHome);
            newTabBtn.addEventListener('click', createNewTab);

            // Search type toggle
            searchTypeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    searchTypeButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentSearchType = this.dataset.type;
                    
                    if (searchInput.value.trim()) {
                        performSearch();
                    }
                });
            });

            // History functionality
            historyBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                historyDropdown.classList.toggle('show');
                updateHistoryDropdown();
            });

            clearHistoryBtn.addEventListener('click', function() {
                browsingHistory = [];
                updateHistoryDropdown();
            });

            // Close history dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!historyDropdown.contains(e.target) && !historyBtn.contains(e.target)) {
                    historyDropdown.classList.remove('show');
                }
            });

            // Quick access items
            document.addEventListener('click', function(e) {
                const quickItem = e.target.closest('.quick-access-item');
                if (quickItem) {
                    e.preventDefault();
                    const searchTerm = quickItem.dataset.search;
                    if (searchTerm) {
                        performQuickSearch(searchTerm);
                    }
                }
            });

            // Tab management
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('tab-close')) {
                    e.stopPropagation();
                    const tab = e.target.closest('.tab');
                    closeTab(tab.dataset.tabId);
                } else if (e.target.closest('.tab')) {
                    const tab = e.target.closest('.tab');
                    switchTab(tab.dataset.tabId);
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'l') {
                    e.preventDefault();
                    searchInput.focus();
                    searchInput.select();
                }
                if (e.ctrlKey && e.key === 't') {
                    e.preventDefault();
                    createNewTab();
                }
                if (e.ctrlKey && e.key === 'w') {
                    e.preventDefault();
                    if (Object.keys(tabs).length > 1) {
                        closeTab(activeTabId);
                    }
                }
                if (e.altKey && e.key === 'ArrowLeft') {
                    e.preventDefault();
                    navigateBack();
                }
                if (e.altKey && e.key === 'ArrowRight') {
                    e.preventDefault();
                    navigateForward();
                }
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    refreshPage();
                }
                if (e.key === 'Escape') {
                    closeImageModal();
                }
            });

            // Focus search input when clicking in address bar area
            searchInput.addEventListener('focus', function() {
                if (tabs[activeTabId] && tabs[activeTabId].type === 'homepage') {
                    createSearchTab();
                }
            });

            // Close modal when clicking outside
            imageModal.addEventListener('click', function(e) {
                if (e.target === imageModal) {
                    closeImageModal();
                }
            });
        }

        function setupSwipeGestures() {
            // Touch events
            contentArea.addEventListener('touchstart', handleSwipeStart, { passive: true });
            contentArea.addEventListener('touchmove', handleSwipeMove, { passive: false });
            contentArea.addEventListener('touchend', handleSwipeEnd, { passive: true });

            // Mouse events for desktop
            contentArea.addEventListener('mousedown', handleSwipeStart);
            contentArea.addEventListener('mousemove', handleSwipeMove);
            contentArea.addEventListener('mouseup', handleSwipeEnd);
            contentArea.addEventListener('mouseleave', handleSwipeEnd);

            function handleSwipeStart(e) {
                startX = e.touches ? e.touches[0].clientX : e.clientX;
                startY = e.touches ? e.touches[0].clientY : e.clientY;
                isSwipe = true;
            }

            function handleSwipeMove(e) {
                if (!isSwipe) return;
                
                const currentX = e.touches ? e.touches[0].clientX : e.clientX;
                const currentY = e.touches ? e.touches[0].clientY : e.clientY;
                const diffX = currentX - startX;
                const diffY = currentY - startY;
                
                // Only handle horizontal swipes
                if (Math.abs(diffY) > Math.abs(diffX)) {
                    return;
                }
                
                const currentTab = tabs[activeTabId];
                const activeContent = document.querySelector('.tab-content.active');
                
                // Handle back swipe (right swipe)
                if (diffX > 20 && currentTab && currentTab.historyIndex > 0) {
                    e.preventDefault();
                    const swipeAmount = Math.min(diffX, swipeThreshold * 1.5);
                    if (activeContent) {
                        activeContent.style.transform = `translateX(${swipeAmount * 0.5}px)`;
                        activeContent.style.opacity = 1 - (swipeAmount / swipeThreshold) * 0.3;
                    }
                    
                    if (swipeAmount > swipeThreshold * 0.5) {
                        swipeBackIndicator.classList.add('show');
                    } else {
                        swipeBackIndicator.classList.remove('show');
                    }
                    swipeForwardIndicator.classList.remove('show');
                }
                // Handle forward swipe (left swipe)
                else if (diffX < -20 && currentTab && currentTab.historyIndex < currentTab.history.length - 1) {
                    e.preventDefault();
                    const swipeAmount = Math.min(Math.abs(diffX), swipeThreshold * 1.5);
                    if (activeContent) {
                        activeContent.style.transform = `translateX(-${swipeAmount * 0.5}px)`;
                        activeContent.style.opacity = 1 - (swipeAmount / swipeThreshold) * 0.3;
                    }
                    
                    if (swipeAmount > swipeThreshold * 0.5) {
                        swipeForwardIndicator.classList.add('show');
                    } else {
                        swipeForwardIndicator.classList.remove('show');
                    }
                    swipeBackIndicator.classList.remove('show');
                }
                else {
                    // Reset if no valid swipe
                    swipeBackIndicator.classList.remove('show');
                    swipeForwardIndicator.classList.remove('show');
                    if (activeContent) {
                        activeContent.style.transform = '';
                        activeContent.style.opacity = '';
                    }
                }
            }

            function handleSwipeEnd(e) {
                if (!isSwipe) return;
                isSwipe = false;
                
                const currentX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
                const diffX = currentX - startX;
                const activeContent = document.querySelector('.tab-content.active');
                const currentTab = tabs[activeTabId];
                
                // Hide indicators
                swipeBackIndicator.classList.remove('show');
                swipeForwardIndicator.classList.remove('show');
                
                // Check for valid swipe
                if (Math.abs(diffX) > swipeThreshold) {
                    if (diffX > 0 && currentTab && currentTab.historyIndex > 0) {
                        // Back navigation
                        navigateBack();
                        return;
                    } else if (diffX < 0 && currentTab && currentTab.historyIndex < currentTab.history.length - 1) {
                        // Forward navigation
                        navigateForward();
                        return;
                    }
                }
                
                // Reset transform if no navigation
                if (activeContent) {
                    activeContent.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
                    activeContent.style.transform = '';
                    activeContent.style.opacity = '';
                    
                    setTimeout(() => {
                        activeContent.style.transition = '';
                    }, 300);
                }
            }
        }

        function navigateBack() {
            const currentTab = tabs[activeTabId];
            if (currentTab && currentTab.historyIndex > 0) {
                currentTab.historyIndex--;
                loadFromTabHistory();
                animateNavigation('back');
            }
        }

        function navigateForward() {
            const currentTab = tabs[activeTabId];
            if (currentTab && currentTab.historyIndex < currentTab.history.length - 1) {
                currentTab.historyIndex++;
                loadFromTabHistory();
                animateNavigation('forward');
            }
        }

        function animateNavigation(direction) {
            const activeContent = document.querySelector('.tab-content.active');
            if (activeContent) {
                activeContent.style.transition = 'transform 0.2s ease';
                if (direction === 'back') {
                    activeContent.style.transform = 'translateX(10px)';
                } else {
                    activeContent.style.transform = 'translateX(-10px)';
                }
                
                setTimeout(() => {
                    activeContent.style.transform = '';
                    setTimeout(() => {
                        activeContent.style.transition = '';
                    }, 200);
                }, 50);
            }
        }

        function loadFromTabHistory() {
            const currentTab = tabs[activeTabId];
            if (currentTab && currentTab.historyIndex >= 0 && currentTab.historyIndex < currentTab.history.length) {
                const item = currentTab.history[currentTab.historyIndex];
                searchInput.value = item.query;
                currentTab.lastQuery = item.query;
                
                // Update search type
                searchTypeButtons.forEach(btn => btn.classList.remove('active'));
                const targetBtn = document.querySelector(`[data-type="${item.type}"]`);
                if (targetBtn) {
                    targetBtn.classList.add('active');
                }
                currentSearchType = item.type;
                
                performSearch(false); // Don't add to history again
            }
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            const currentTab = tabs[activeTabId];
            if (currentTab) {
                const canGoBack = currentTab.historyIndex > 0;
                const canGoForward = currentTab.historyIndex < currentTab.history.length - 1;
                
                backBtn.disabled = !canGoBack;
                forwardBtn.disabled = !canGoForward;
                
                // Add visual feedback
                if (canGoBack) {
                    backBtn.classList.add('can-navigate');
                } else {
                    backBtn.classList.remove('can-navigate');
                }
                
                if (canGoForward) {
                    forwardBtn.classList.add('can-navigate');
                } else {
                    forwardBtn.classList.remove('can-navigate');
                }
            } else {
                backBtn.disabled = true;
                forwardBtn.disabled = true;
                backBtn.classList.remove('can-navigate');
                forwardBtn.classList.remove('can-navigate');
            }
        }

        function refreshPage() {
            const currentTab = tabs[activeTabId];
            if (currentTab && currentTab.type === 'search' && currentTab.lastQuery) {
                searchInput.value = currentTab.lastQuery;
                performSearch(false);
            } else if (currentTab && currentTab.type === 'website') {
                // Refresh website content
                displayWebsite(currentTab.websiteData);
            } else {
                location.reload();
            }
        }

        function goHome() {
            // If current tab is homepage, do nothing
            if (tabs[activeTabId] && tabs[activeTabId].type === 'homepage') {
                return;
            }
            
            // Create new homepage tab
            createNewTab();
        }

        function createSearchTab() {
            tabCounter++;
            const newTabId = `search${tabCounter}`;
            
            // Create tab data
            tabs[newTabId] = {
                id: newTabId,
                title: 'Search',
                icon: 'S',
                type: 'search',
                url: '',
                history: [],
                historyIndex: -1,
                lastQuery: ''
            };
            
            // Create tab element
            const newTab = document.createElement('div');
            newTab.className = 'tab';
            newTab.dataset.tabId = newTabId;
            newTab.innerHTML = `
                <div class="tab-icon">S</div>
                <div class="tab-title">Search</div>
                <div class="tab-close">×</div>
            `;
            
            // Insert before new tab button
            tabsContainer.insertBefore(newTab, newTabBtn);
            
            // Create content
            const newContent = document.createElement('div');
            newContent.className = 'tab-content';
            newContent.id = `tab-${newTabId}`;
            newContent.innerHTML = `
                <div class="content-inner">
                    <div class="homepage">
                        <div class="logo-large">SearchHub</div>
                        <div class="search-suggestion">Search the web or find images</div>
                    </div>
                    
                    <div class="results-container" style="display: none;">
                        <!-- Results will be inserted here -->
                    </div>
                </div>
            `;
            
            contentArea.appendChild(newContent);
            switchTab(newTabId);
            searchInput.focus();
        }

        function switchTab(tabId) {
            // Update tab appearance
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            const targetTab = document.querySelector(`[data-tab-id="${tabId}"]`);
            if (targetTab) {
                targetTab.classList.add('active');
            }

            // Update content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            const targetContent = document.getElementById(`tab-${tabId}`);
            if (targetContent) {
                targetContent.classList.add('active');
            }

            activeTabId = tabId;
            const currentTab = tabs[tabId];
            
            // Update address bar
            if (currentTab) {
                if (currentTab.type === 'search' && currentTab.lastQuery) {
                    searchInput.value = currentTab.lastQuery;
                } else if (currentTab.type === 'website' && currentTab.url) {
                    searchInput.value = currentTab.url;
                } else {
                    searchInput.value = '';
                }
            }
            
            updateNavigationButtons();
        }

        function createNewTab() {
            tabCounter++;
            const newTabId = `home${tabCounter}`;
            
            // Create tab data
            tabs[newTabId] = {
                id: newTabId,
                title: 'New Tab',
                icon: '🏠',
                type: 'homepage',
                url: '',
                history: [],
                historyIndex: -1
            };
            
            // Create tab element
            const newTab = document.createElement('div');
            newTab.className = 'tab';
            newTab.dataset.tabId = newTabId;
            newTab.innerHTML = `
                <div class="tab-icon">🏠</div>
                <div class="tab-title">New Tab</div>
                <div class="tab-close">×</div>
            `;
            
            // Insert before new tab button
            tabsContainer.insertBefore(newTab, newTabBtn);
            
            // Create content
            const newContent = document.createElement('div');
            newContent.className = 'tab-content';
            newContent.id = `tab-${newTabId}`;
            newContent.innerHTML = `
                <div class="content-inner">
                    <div class="homepage">
                        <div class="logo-large">SearchHub</div>
                        <div class="homepage-search">
                            <input type="text" class="homepage-search-input" placeholder="Search the web...">
                            <button class="homepage-search-button">Search</button>
                        </div>
                        <div class="search-suggestion">Your gateway to the web</div>
                        
                        <div class="quick-access">
                            <a href="#" class="quick-access-item" data-search="news">
                                <div class="quick-access-icon">📰</div>
                                <div class="quick-access-title">News</div>
                            </a>
                            <a href="#" class="quick-access-item" data-search="weather">
                                <div class="quick-access-icon">🌤️</div>
                                <div class="quick-access-title">Weather</div>
                            </a>
                            <a href="#" class="quick-access-item" data-search="sports">
                                <div class="quick-access-icon">⚽</div>
                                <div class="quick-access-title">Sports</div>
                            </a>
                            <a href="#" class="quick-access-item" data-search="technology">
                                <div class="quick-access-icon">💻</div>
                                <div class="quick-access-title">Tech</div>
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            contentArea.appendChild(newContent);
            
            // Add event listeners for the new homepage search
            const newHomepageInput = newContent.querySelector('.homepage-search-input');
            const newHomepageButton = newContent.querySelector('.homepage-search-button');
            
            newHomepageButton.addEventListener('click', function() {
                performHomepageSearchForTab(newTabId, newHomepageInput.value.trim());
            });
            
            newHomepageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    performHomepageSearchForTab(newTabId, newHomepageInput.value.trim());
                }
            });
            
            switchTab(newTabId);
        }

        function closeTab(tabId) {
            const tabElements = document.querySelectorAll('.tab');
            if (tabElements.length <= 1) return; // Don't close last tab
            
            // Remove tab and content
            const tabElement = document.querySelector(`[data-tab-id="${tabId}"]`);
            const contentElement = document.getElementById(`tab-${tabId}`);
            
            if (tabElement) tabElement.remove();
            if (contentElement) contentElement.remove();
            
            // Remove from tabs object
            delete tabs[tabId];
            
            // Switch to another tab if this was active
            if (activeTabId === tabId) {
                const remainingTabs = document.querySelectorAll('.tab');
                if (remainingTabs.length > 0) {
                    switchTab(remainingTabs[0].dataset.tabId);
                }
            }
        }

        function performHomepageSearch() {
            const query = homepageSearchInput.value.trim();
            if (query) {
                performHomepageSearchForTab('home', query);
            }
        }

        function performHomepageSearchForTab(tabId, query) {
            if (!query) return;
            
            // Convert homepage tab to search tab
            const currentTab = tabs[tabId];
            if (currentTab) {
                currentTab.type = 'search';
                currentTab.title = query.substring(0, 20) + (query.length > 20 ? '...' : '');
                currentTab.icon = 'S';
                currentTab.lastQuery = query;
                
                // Update tab appearance
                const tabElement = document.querySelector(`[data-tab-id="${tabId}"]`);
                if (tabElement) {
                    tabElement.querySelector('.tab-icon').textContent = 'S';
                    tabElement.querySelector('.tab-title').textContent = currentTab.title;
                }
                
                // Update content to search layout
                const contentElement = document.getElementById(`tab-${tabId}`);
                if (contentElement) {
                    contentElement.innerHTML = `
                        <div class="content-inner">
                            <div class="homepage">
                                <div class="logo-large">SearchHub</div>
                                <div class="search-suggestion">Search the web or find images</div>
                            </div>
                            
                            <div class="results-container" style="display: none;">
                                <!-- Results will be inserted here -->
                            </div>
                        </div>
                    `;
                }
                
                // Switch to this tab and perform search
                switchTab(tabId);
                searchInput.value = query;
                performSearch();
            }
        }

        function performQuickSearch(searchTerm) {
            // If we're on a homepage, convert it to search
            if (tabs[activeTabId] && tabs[activeTabId].type === 'homepage') {
                performHomepageSearchForTab(activeTabId, searchTerm);
            } else {
                // Create new search tab
                createSearchTab();
                searchInput.value = searchTerm;
                performSearch();
            }
        }

        function performSearch(addToHistory = true) {
            const query = searchInput.value.trim();
            if (!query || isLoading) return;

            // Ensure we're in a search tab
            const currentTab = tabs[activeTabId];
            if (!currentTab || currentTab.type !== 'search') {
                return;
            }

            // Update tab title and last query
            currentTab.lastQuery = query;
            const shortTitle = query.substring(0, 20) + (query.length > 20 ? '...' : '');
            currentTab.title = shortTitle;
            
            const tabElement = document.querySelector(`[data-tab-id="${activeTabId}"]`);
            if (tabElement) {
                const tabIcon = tabElement.querySelector('.tab-icon');
                const tabTitle = tabElement.querySelector('.tab-title');
                
                tabIcon.classList.add('loading');
                tabIcon.textContent = '⟳';
                tabTitle.textContent = shortTitle;
            }

            // Add to tab history
            if (addToHistory) {
                const historyItem = { query, type: currentSearchType };
                if (currentTab.historyIndex === -1 || 
                    JSON.stringify(currentTab.history[currentTab.historyIndex]) !== JSON.stringify(historyItem)) {
                    currentTab.history = currentTab.history.slice(0, currentTab.historyIndex + 1);
                    currentTab.history.push(historyItem);
                    currentTab.historyIndex = currentTab.history.length - 1;
                }
                
                // Add to browsing history
                addToBrowsingHistory(query, currentSearchType);
            }
            
            updateNavigationButtons();

            isLoading = true;
            searchButton.textContent = 'Searching...';
            searchButton.disabled = true;
            
            const contentElement = document.getElementById(`tab-${activeTabId}`);
            const homepage = contentElement.querySelector('.homepage');
            const resultsContainer = contentElement.querySelector('.results-container');
            
            homepage.style.display = 'none';
            resultsContainer.style.display = 'block';
            resultsContainer.innerHTML = '<div class="loading">Searching...</div>';

            // Simulate search delay and show demo results
            setTimeout(() => {
                if (currentSearchType === 'image') {
                    displayImageResults(query, resultsContainer);
                } else {
                    displayDemoResults(query, currentSearchType, resultsContainer);
                }
                
                isLoading = false;
                searchButton.textContent = 'Search';
                searchButton.disabled = false;
                
                // Remove loading indicator
                if (tabElement) {
                    const tabIcon = tabElement.querySelector('.tab-icon');
                    tabIcon.classList.remove('loading');
                    tabIcon.textContent = currentSearchType === 'image' ? '🖼️' : 'S';
                }
            }, 1000);
        }

        function displayImageResults(query, container) {
            let resultsHTML = `<div class="results-info">About ${Math.floor(Math.random() * 500000).toLocaleString()} images found (${(Math.random() * 0.5 + 0.1).toFixed(2)} seconds)</div>`;
            
            resultsHTML += '<div class="image-results">';
            
            for (let i = 0; i < 12; i++) {
                const imageUrl = sampleImages[i];
                const title = `${query} image ${i + 1}`;
                const source = `example${i + 1}.com`;
                
                resultsHTML += `
                    <div class="image-result" onclick="openImageModal('${imageUrl}', '${title}', '${source}')">
                        <img src="${imageUrl}" alt="${title}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjFGM0Y0Ii8+CjxwYXRoIGQ9Ik0yMCAyMkMyMS4xMDQ2IDIyIDIyIDIxLjEwNDYgMjIgMjBDMjIgMTguODk1NCAyMS4xMDQ2IDE4IDIwIDE4QzE4Ljg5NTQgMTggMTggMTguODk1NCAxOCAyMEMxOCAyMS4xMDQ2IDE4Ljg5NTQgMjIgMjAgMjJaIiBmaWxsPSIjNUY2MzY4Ii8+CjxwYXRoIGQ9Ik0yOCAyNEgyMFYyNkgyOFYyNFoiIGZpbGw9IiM1RjYzNjgiLz4KPHA+cGF0aCBkPSJNMTIgMjRIMTJIMTJWMjZIMjBWMjRIMTJaIiBmaWxsPSIjNUY2MzY4Ii8+Cjwvc3ZnPgo='">
                        <div class="image-info">
                            <div class="image-title">${title}</div>
                            <div class="image-source">${source}</div>
                        </div>
                    </div>
                `;
            }
            
            resultsHTML += '</div>';
            container.innerHTML = resultsHTML;
        }

        function openImageModal(imageUrl, title, source) {
            document.getElementById('modalImage').src = imageUrl;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalSource').textContent = source;
            imageModal.classList.add('show');
        }

        function closeImageModal() {
            imageModal.classList.remove('show');
        }

        function displayWebsite(websiteData) {
            const currentTab = tabs[activeTabId];
            const contentElement = document.getElementById(`tab-${activeTabId}`);
            
            contentElement.innerHTML = `
                <div class="website-header">
                    <div class="website-icon">${websiteData.icon}</div>
                    <div class="website-info">
                        <h3>${websiteData.title}</h3>
                        <p>${websiteData.url}</p>
                    </div>
                    <button class="back-to-results" onclick="goBackToSearch()">← Back to Results</button>
                </div>
                <div style="padding: 40px; line-height: 1.6; color: #202124;">
                    <h1 style="margin-bottom: 20px; color: #1a0dab;">${websiteData.title}</h1>
                    <p style="margin-bottom: 16px;">${websiteData.content}</p>
                    <p style="margin-bottom: 16px;">This is a demo website showing how SearchHub would display actual web content. In a real implementation, this would load the actual website content.</p>
                    <p style="margin-bottom: 16px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
                    <p style="margin-bottom: 16px;">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
            `;
        }

        function goBackToSearch() {
            const currentTab = tabs[activeTabId];
            if (currentTab && currentTab.searchData) {
                // Restore search results
                currentTab.type = 'search';
                currentTab.title = currentTab.searchData.query.substring(0, 20) + (currentTab.searchData.query.length > 20 ? '...' : '');
                currentTab.icon = currentTab.searchData.type === 'image' ? '🖼️' : 'S';
                
                // Update tab appearance
                const tabElement = document.querySelector(`[data-tab-id="${activeTabId}"]`);
                if (tabElement) {
                    tabElement.querySelector('.tab-icon').textContent = currentTab.icon;
                    tabElement.querySelector('.tab-title').textContent = currentTab.title;
                }
                
                // Restore search content
                const contentElement = document.getElementById(`tab-${activeTabId}`);
                contentElement.innerHTML = `
                    <div class="content-inner">
                        <div class="homepage" style="display: none;">
                            <div class="logo-large">SearchHub</div>
                            <div class="search-suggestion">Search the web or find images</div>
                        </div>
                        
                        <div class="results-container">
                            ${currentTab.searchData.results}
                        </div>
                    </div>
                `;
                
                // Update address bar
                searchInput.value = currentTab.searchData.query;
                
                // Update search type
                searchTypeButtons.forEach(btn => btn.classList.remove('active'));
                const targetBtn = document.querySelector(`[data-type="${currentTab.searchData.type}"]`);
                if (targetBtn) {
                    targetBtn.classList.add('active');
                }
                currentSearchType = currentTab.searchData.type;
            }
        }

        function addToBrowsingHistory(query, type) {
            const timestamp = new Date().toISOString();
            const historyItem = {
                id: Date.now() + Math.random(),
                query,
                type,
                timestamp,
                title: query
            };
            
            // Remove duplicates and add to beginning
            browsingHistory = browsingHistory.filter(item => item.query !== query || item.type !== type);
            browsingHistory.unshift(historyItem);
            
            // Keep only last 50 items
            if (browsingHistory.length > 50) {
                browsingHistory = browsingHistory.slice(0, 50);
            }
        }

        function updateHistoryDropdown() {
            if (browsingHistory.length === 0) {
                historyList.innerHTML = '<div style="padding: 20px; text-align: center; color: #5f6368;">No history yet</div>';
                return;
            }
            
            const historyHTML = browsingHistory.map(item => {
                const date = new Date(item.timestamp);
                const timeString = formatTime(date);
                
                return `
                    <div class="history-item" data-query="${item.query}" data-type="${item.type}">
                        <div class="history-icon">${item.type === 'image' ? '🖼️' : '🔍'}</div>
                        <div class="history-content">
                            <div class="history-title">${item.query}</div>
                            <div class="history-time">${timeString}</div>
                        </div>
                        <button class="history-delete" onclick="deleteHistoryItem('${item.id}')" title="Remove from history">×</button>
                    </div>
                `;
            }).join('');
            
            historyList.innerHTML = historyHTML;
            
            // Add click listeners to history items
            historyList.querySelectorAll('.history-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    if (e.target.classList.contains('history-delete')) return;
                    
                    const query = this.dataset.query;
                    const type = this.dataset.type;
                    
                    // Set search type
                    searchTypeButtons.forEach(btn => btn.classList.remove('active'));
                    const targetBtn = document.querySelector(`[data-type="${type}"]`);
                    if (targetBtn) {
                        targetBtn.classList.add('active');
                    }
                    currentSearchType = type;
                    
                    // Perform search
                    if (tabs[activeTabId] && tabs[activeTabId].type === 'homepage') {
                        performHomepageSearchForTab(activeTabId, query);
                    } else if (tabs[activeTabId] && tabs[activeTabId].type === 'search') {
                        searchInput.value = query;
                        performSearch();
                    } else {
                        createSearchTab();
                        searchInput.value = query;
                        performSearch();
                    }
                    
                    historyDropdown.classList.remove('show');
                });
            });
        }

        function deleteHistoryItem(itemId) {
            browsingHistory = browsingHistory.filter(item => item.id != itemId);
            updateHistoryDropdown();
        }

        function formatTime(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins === 1 ? '' : 's'} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours === 1 ? '' : 's'} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`;
            
            return date.toLocaleDateString();
        }

        function displayDemoResults(query, searchType, container) {
            const demoResults = generateDemoResults(query, searchType);
            
            let resultsHTML = `<div class="results-info">About ${Math.floor(Math.random() * 1000000).toLocaleString()} results (${(Math.random() * 0.5 + 0.1).toFixed(2)} seconds)</div>`;
            
            resultsHTML += '<div class="demo-results">';
            
            demoResults.forEach((result, index) => {
                resultsHTML += `
                    <div class="demo-result-item" onclick="openWebsite('${result.url}', '${result.title}', '${result.snippet}', ${index})">
                        <a href="#" class="demo-result-title" onclick="event.preventDefault(); openWebsite('${result.url}', '${result.title}', '${result.snippet}', ${index})">${result.title}</a>
                        <div class="demo-result-url">${result.url}</div>
                        <div class="demo-result-snippet">${result.snippet}</div>
                    </div>
                `;
            });
            
            resultsHTML += '</div>';
            container.innerHTML = resultsHTML;
            
            // Store search data for back navigation
            const currentTab = tabs[activeTabId];
            if (currentTab) {
                currentTab.searchData = {
                    query: query,
                    type: searchType,
                    results: resultsHTML
                };
            }
        }

        function openWebsite(url, title, snippet, index) {
            const currentTab = tabs[activeTabId];
            if (!currentTab) return;
            
            // Convert tab to website type
            currentTab.type = 'website';
            currentTab.url = url;
            currentTab.title = title.substring(0, 30) + (title.length > 30 ? '...' : '');
            currentTab.icon = '🌐';
            
            // Store website data
            currentTab.websiteData = {
                url: url,
                title: title,
                content: snippet + ' This is additional content that would be loaded from the actual website. In a real browser, this would display the full webpage with all its content, images, and interactive elements.',
                icon: '🌐'
            };
            
            // Update tab appearance
            const tabElement = document.querySelector(`[data-tab-id="${activeTabId}"]`);
            if (tabElement) {
                tabElement.querySelector('.tab-icon').textContent = '🌐';
                tabElement.querySelector('.tab-title').textContent = currentTab.title;
            }
            
            // Update address bar
            searchInput.value = url;
            
            // Add to tab history
            const historyItem = { query: url, type: 'website', websiteData: currentTab.websiteData };
            currentTab.history = currentTab.history.slice(0, currentTab.historyIndex + 1);
            currentTab.history.push(historyItem);
            currentTab.historyIndex = currentTab.history.length - 1;
            
            updateNavigationButtons();
            
            // Display website
            displayWebsite(currentTab.websiteData);
        }

        function generateDemoResults(query, searchType) {
            const domains = ['wikipedia.org', 'news.com', 'guide.example.com', 'official-site.com', 'reviews.net', 'blog.example.org', 'forum.community', 'docs.reference.com'];
            const baseResults = [];
            
            for (let i = 0; i < 8; i++) {
                const domain = domains[i % domains.length];
                baseResults.push({
                    title: `${query} - ${['Complete Guide', 'Latest News', 'Official Information', 'Reviews & Ratings', 'Community Discussion', 'Expert Analysis', 'How-to Guide', 'Reference Documentation'][i]}`,
                    url: `https://${domain}/${query.toLowerCase().replace(/ /g, '-')}`,
                    snippet: `Comprehensive information about ${query}. ${['Learn everything you need to know about', 'Get the latest updates and news on', 'Find official details and resources for', 'Read user reviews and comparisons of', 'Join the community discussion about', 'Expert insights and analysis on', 'Step-by-step tutorials for', 'Complete reference documentation for'][i]} ${query}. ${['This authoritative source provides detailed explanations, examples, and practical applications.', 'Stay informed with breaking news, trends, and developments in this field.', 'Access verified information directly from official sources and organizations.', 'Make informed decisions based on real user experiences and expert evaluations.', 'Connect with other users and share knowledge in our active community.', 'Get professional perspectives and in-depth analysis from industry experts.', 'Follow easy-to-understand guides with practical tips and best practices.', 'Access comprehensive documentation with technical details and specifications.'][i]}`
                });
            }
            
            return baseResults.slice(0, Math.floor(Math.random() * 3) + 5);
        }

        // Make functions globally accessible
        window.deleteHistoryItem = deleteHistoryItem;
        window.openImageModal = openImageModal;
        window.closeImageModal = closeImageModal;
        window.openWebsite = openWebsite;
        window.goBackToSearch = goBackToSearch;

        console.log('SearchHub Browser initialized successfully!');
    </script>
</body>
</html>
